import 'package:flutter_test/flutter_test.dart';
import 'package:hn_app_flutter/json_parsing.dart';

void main() {
  test('parse topStories.json', () {
    const jsonString =
        '[20603567,20604566,20604119,20604782,20604767,20603595,20603968,20602553,20603739,20603650,20602407,20603300,20603378,20602281,20578976,20603386,20603908,20597963,20602560,20602647,20601466,20599971,20599230,20601054,20599728,20600738,20604108,20604203,20595775,20603600,20599835,20600682,20601200,20593633,20598953,20600852,20595403,20600722,20604636,20602960,20604212,20600195,20603950,20590982,20604617,20604419,20599575,20599883,20602425,20602962,20600844,20600878,20599127,20596815,20592016,20599998,20600775,20591964,20596697,20599756,20602338,20599752,20598912,20598025,20596454,20585637,20603401,20595972,20589118,20589190,20600128,20600138,20599039,20582836,20600519,20599190,20600406,20598179,20595153,20593436,20597711,20602705,20594802,20601940,20587440,20591609,20596655,20599837,20591071,20600774,20602343,20591771,20600178,20595486,20604244,20589216,20602414,20594207,20596384,20601428,20596149,20588135,20596304,20596299,20602950,20598138,20595658,20578591,20595194,20600251,20596020,20599715,20590682,20582634,20594667,20590101,20590415,20589870,20588274,20593640,20582387,20596554,20599249,20597965,20595345,20594531,20592703,20592029,20599842,20589087,20592431,20597367,20592384,20596295,20596640,20592623,20592811,20592011,20597144,20594632,20599963,20586839,20595696,20587541,20588873,20582844,20597101,20590748,20599795,20585447,20600906,20585664,20595523,20576685,20584986,20602670,20599027,20591640,20595307,20585406,20594901,20581761,20586005,20597115,20594211,20589102,20597282,20596896,20594361,20582290,20585391,20598746,20587812,20597386,20598086,20582312,20601732,20588952,20580875,20585212,20591023,20599941,20585054,20587547,20596961,20599888,20591231,20601011,20581085,20589420,20583710,20597443,20595098,20588809,20584508,20584309,20588112,20584937,20588677,20577334,20579887,20590247,20584311,20588272,20589291,20595451,20589738,20587902,20577992,20590555,20593563,20585970,20598478,20595747,20597214,20600087,20600890,20577660,20588621,20581464,20602787,20598227,20583871,20580017,20592098,20591644,20591317,20579868,20576162,20597798,20588039,20589397,20601080,20585074,20587301,20598865,20598824,20576503,20579166,20597573,20585810,20592783,20581387,20587753,20583378,20595617,20600262,20582954,20602351,20599382,20602298,20578850,20591246,20590818,20583581,20576544,20584310,20587393,20596659,20595699,20575502,20580589,20585912,20597268,20590439,20579744,20595469,20583875,20579185,20597803,20591557,20578808,20594852,20600665,20594410,20601588,20576791,20583236,20579652,20580483,20578189,20593845,20602519,20579010,20598838,20581240,20586369,20580131,20590407,20589830,20596310,20592320,20596092,20597281,20596524,20589065,20581198,20575997,20578232,20578766,20579565,20596568,20600599,20588326,20581915,20600430,20589788,20596653,20589333,20593359,20593320,20589232,20599523,20596143,20585907,20595155,20577477,20590704,20589174,20581069,20592448,20601790,20586379,20592660,20596511,20585942,20577154,20594103,20585284,20589490,20591525,20589902,20588080,20597413,20583810,20590061,20588424,20576876,20586217,20575760,20575463,20575409,20598726,20575429,20599412,20600656,20598080,20577416,20600305,20590590,20580190,20576655,20590493,20582746,20599220,20593996,20598362,20597782,20599153,20595288,20585794,20586930,20598092,20586718,20594468,20577164,20596051,20596043,20588849,20585929,20579558,20587904,20592062,20597429,20587486,20598639,20598606,20577082,20595416,20589159,20598470,20587663,20588954,20596699,20596510,20598311,20586272,20583563,20594312,20579334,20583363,20587063,20592837,20595275,20597815,20595060,20579824,20581301,20583764,20586451,20597245,20577142,20586537,20590521,20580269,20588121,20580163,20590974,20581101,20576845,20595974,20576991,20582484,20586846,20595386,20592250,20588363,20594627,20576361,20587388,20594017,20594008,20593982,20602089,20589786,20586972,20586487,20579357,20576856,20580556,20590920,20583958,20583307,20590712,20576864,20580812,20578900,20592237,20588512,20582988,20590107,20585624,20591747,20591604,20589426,20585497,20589636,20599722,20575748,20591194,20591051,20587891,20590875,20593559,20590828,20578401,20590781,20586976,20582496,20586738,20585961,20578174,20584925,20581302,20578831,20581223,20583326,20576972,20586364,20579264,20587796,20576908,20581523,20587031,20586953,20586842,20577374,20586403,20577067,20585850,20584758,20580828,20575479,20594834,20580530,20580413,20579995,20583017,20582656,20581958,20576412,20576246,20590602,20584380,20580513,20602217,20580962,20593723,20576911,20576540]';

    expect(parseTopStories(jsonString).first, 20603567);
  });

  test('parse item.json', () {
    const jsonString = """
        {"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}
        """;

    expect(parseArticle(jsonString).by, 'dhouston');
  });
}
